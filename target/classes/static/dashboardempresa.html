<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SIGE - Dashboard Empresa</title>
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: { primary: '#3b82f6', secondary: '#1e40af' },
                borderRadius: { 'button': '8px' }
            }
        }
    }
</script>
</head>
<body class="bg-gray-50 min-h-screen">

<div class="w-full">
<header class="bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-6 py-8 flex justify-between items-center">
        <div>
            <h1 class="font-['Pacifico'] text-4xl text-primary mb-2">SIGE</h1>
            <p class="text-gray-600 text-lg font-medium">Sistema Integrado de Gestão de Estágio</p>
        </div>
        <div class="flex items-center gap-4">
            <div class="w-10 h-10 flex items-center justify-center bg-primary rounded-full text-white">
                <i class="ri-building-line text-lg"></i>
            </div>
            <div>
                <p class="text-sm font-medium text-gray-900">TechCorp Solutions</p>
                <p class="text-xs text-gray-500">Empresa</p>
            </div>
        </div>
    </div>
</header>

<nav class="bg-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-6">
        <div class="flex space-x-1">
            <button id="tab-ofertas" class="tab-button px-6 py-4 text-sm font-medium !rounded-button whitespace-nowrap bg-primary text-white">
                <div class="w-5 h-5 flex items-center justify-center mr-2 inline-block"><i class="ri-briefcase-line"></i></div>Minhas Ofertas
            </button>
            <button id="tab-perfil" class="tab-button px-6 py-4 text-sm font-medium !rounded-button whitespace-nowrap text-gray-600 hover:text-primary hover:bg-blue-50">
                <div class="w-5 h-5 flex items-center justify-center mr-2 inline-block"><i class="ri-user-settings-line"></i></div>Meu Perfil
            </button>
            <button id="tab-gerenciar" class="tab-button px-6 py-4 text-sm font-medium !rounded-button whitespace-nowrap text-gray-600 hover:text-primary hover:bg-blue-50">
                <div class="w-5 h-5 flex items-center justify-center mr-2 inline-block"><i class="ri-settings-4-line"></i></div>Gerenciar Ofertas
            </button>
        </div>
    </div>
</nav>

<main class="max-w-7xl mx-auto px-6 py-8">

<!-- Minhas Ofertas -->
<div id="content-ofertas" class="tab-content">
    <div class="mb-6 flex justify-between items-center">
        <div>
            <h2 class="text-2xl font-bold text-gray-900 mb-2">Minhas Ofertas de Estágio</h2>
            <p class="text-gray-600">Gerencie suas vagas e acompanhe inscrições de candidatos</p>
        </div>
        <button id="btn-adicionar-oferta" class="bg-primary text-white px-4 py-2 !rounded-button text-sm font-medium hover:bg-blue-600 transition-colors whitespace-nowrap">Adicionar Oferta</button>
    </div>
    <div id="ofertas-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</div>

<!-- Meu Perfil -->
<div id="content-perfil" class="tab-content hidden">
    <div class="mb-6">
        <h2 class="text-2xl font-bold text-gray-900 mb-2">Meu Perfil</h2>
        <p class="text-gray-600">Atualize suas informações</p>
    </div>
    <div class="bg-white rounded-md shadow-sm border border-gray-200 p-8">
        <form class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nome da Empresa</label>
                    <input type="text" value="TechCorp Solutions" class="w-full px-4 py-3 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">E-mail</label>
                    <input type="email" value="contato@techcorp.com.br" class="w-full px-4 py-3 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Telefone</label>
                    <input type="tel" value="(11) 3456-7890" class="w-full px-4 py-3 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Endereço</label>
                    <input type="text" value="Av. das Empresas, 500 - São Paulo/SP" class="w-full px-4 py-3 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
            </div>
            <div class="flex justify-end">
                <button type="submit" class="bg-primary text-white px-6 py-3 !rounded-button text-sm font-medium hover:bg-blue-600 transition-colors whitespace-nowrap">Salvar Alterações</button>
            </div>
        </form>
    </div>
</div>

<!-- Gerenciar Ofertas -->
<div id="content-gerenciar" class="tab-content hidden">
    <div class="mb-6">
        <h2 class="text-2xl font-bold text-gray-900 mb-2">Gerenciar Ofertas</h2>
        <p class="text-gray-600">Veja os candidatos inscritos, aceite ou recuse inscrições</p>
    </div>
    <div id="gerenciar-ofertas-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</div>

</main>

<!-- Modal Candidatos -->
<div id="modal-candidatos" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-lg max-w-md w-full p-6">
        <h3 class="text-xl font-semibold mb-4">Candidatos</h3>
        <ul id="lista-candidatos" class="space-y-2 text-gray-700 text-sm"></ul>
        <div class="flex justify-end mt-4">
            <button id="btn-fechar-candidatos" class="bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-600 text-sm">Fechar</button>
        </div>
    </div>
</div>

<!-- Modal Adicionar Oferta -->
<div id="modal-add-oferta" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
    <div class="bg-white rounded-lg max-w-md w-full p-6">
        <h3 class="text-xl font-semibold mb-4">Adicionar Nova Oferta</h3>
        <form id="form-add-oferta" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Descrição da Vaga</label>
                <textarea id="input-descricao-vaga" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-transparent" required></textarea>
            </div>
            <div class="flex justify-end gap-2">
                <button type="button" id="btn-cancelar-add" class="px-4 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50">Cancelar</button>
                <button type="submit" class="bg-primary text-white px-4 py-2 rounded-md text-sm hover:bg-blue-600">Adicionar</button>
            </div>
        </form>
    </div>
</div>

<script>
const ofertasGrid = document.getElementById('ofertas-grid');
const gerenciarGrid = document.getElementById('gerenciar-ofertas-grid');
const btnAdicionar = document.getElementById('btn-adicionar-oferta');
const modalAdd = document.getElementById('modal-add-oferta');
const btnCancelar = document.getElementById('btn-cancelar-add');
const formAddOferta = document.getElementById('form-add-oferta');
const modalCandidatos = document.getElementById('modal-candidatos');
const listaCandidatos = document.getElementById('lista-candidatos');
const btnFecharCandidatos = document.getElementById('btn-fechar-candidatos');

btnAdicionar.addEventListener('click', ()=>{ modalAdd.classList.remove('hidden'); modalAdd.classList.add('flex'); });
btnCancelar.addEventListener('click', ()=>{ modalAdd.classList.add('hidden'); modalAdd.classList.remove('flex'); formAddOferta.reset(); });

function adicionarOferta(empresa, descricao, candidatos=[]){
    const ofertaId = Date.now();

    // Minhas Ofertas
    const cardMinhas = document.createElement('div');
    cardMinhas.className = 'bg-white rounded-md shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow relative';
    cardMinhas.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-900 mb-2">${empresa}</h3>
        <p class="text-gray-600 text-sm mb-4 line-clamp-3">${descricao}</p>
        <div class="space-y-2 mb-4">
            <div class="flex items-center text-sm text-gray-500"><i class="ri-phone-line mr-2"></i> (11) 3456-7890</div>
            <div class="flex items-center text-sm text-gray-500"><i class="ri-mail-line mr-2"></i> contato@techcorp.com.br</div>
        </div>
        <div class="flex justify-between items-center">
            <span class="text-sm text-gray-500">${candidatos.length} candidatos</span>
            <button class="text-red-500 hover:text-red-700" data-id="${ofertaId}"><i class="ri-delete-bin-line"></i></button>
        </div>
    `;
    ofertasGrid.appendChild(cardMinhas);

    // Gerenciar Ofertas
    const cardGerenciar = document.createElement('div');
    cardGerenciar.className = 'bg-white rounded-md shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow relative';
    cardGerenciar.dataset.candidatos = JSON.stringify(candidatos);
    cardGerenciar.dataset.ofertaId = ofertaId;
    cardGerenciar.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-900 mb-2">${empresa}</h3>
        <p class="text-gray-600 text-sm mb-4 line-clamp-3">${descricao}</p>
        <div class="space-y-2">
            <button class="bg-green-500 text-white px-3 py-1 rounded-md text-sm hover:bg-green-600 ver-candidatos">Ver Candidatos</button>
        </div>
        <div class="mt-4">
            <h4 class="font-medium text-gray-700 mb-1">Candidatos Aceitos:</h4>
            <ul class="aceitos-list text-sm text-gray-600 list-disc list-inside"></ul>
            <h4 class="font-medium text-gray-700 mt-3 mb-1">Candidatos Ativos:</h4>
            <ul class="ativos-list text-sm text-green-600 list-disc list-inside">
                <li class="flex justify-between items-center">
                    <span>Lucas Pereira</span>
                    <button class="px-2 py-1 bg-yellow-500 text-white text-xs rounded-md hover:bg-yellow-600 btn-finalizar">Finalizar Estágio</button>
                </li>
            </ul>
            <h4 class="font-medium text-gray-700 mt-3 mb-1">Candidatos Recusados:</h4>
            <ul class="recusados-list text-sm text-red-600 list-disc list-inside"></ul>
        </div>
    `;
    gerenciarGrid.appendChild(cardGerenciar);
}

// Modal Avaliação
function criarModalAvaliacao(){
    if(document.getElementById('modal-avaliacao')) return;
    const modalAvaliacao = document.createElement('div');
    modalAvaliacao.id='modal-avaliacao';
    modalAvaliacao.className='fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4';
    modalAvaliacao.innerHTML=`
        <div class="bg-white rounded-lg max-w-lg w-full p-6">
            <h3 class="text-lg font-semibold mb-4">Avaliar Empresa</h3>
            <p id="empresa-avaliar" class="text-gray-700 mb-2"></p>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Nota:</label>
                <select id="nota-avaliacao" class="w-full border rounded-md p-2">
                    <option value="1">1 ⭐</option>
                    <option value="2">2 ⭐⭐</option>
                    <option value="3">3 ⭐⭐⭐</option>
                    <option value="4">4 ⭐⭐⭐⭐</option>
                    <option value="5">5 ⭐⭐⭐⭐⭐</option>
                </select>
            </div>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Comentário:</label>
                <textarea id="comentario-avaliacao" rows="4" class="w-full border rounded-md p-2" placeholder="Escreva sua avaliação..."></textarea>
            </div>
            <div class="flex justify-end gap-2">
                <button id="cancelar-avaliacao" class="px-4 py-2 border rounded-md hover:bg-gray-100">Cancelar</button>
                <button id="enviar-avaliacao" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-600">Enviar</button>
            </div>
        </div>
    `;
    document.body.appendChild(modalAvaliacao);

    document.getElementById('cancelar-avaliacao').addEventListener('click',()=>{ modalAvaliacao.classList.add('hidden'); modalAvaliacao.classList.remove('flex'); });
    document.getElementById('enviar-avaliacao').addEventListener('click',()=>{
        const empresa=document.getElementById('empresa-avaliar').textContent;
        const nota=document.getElementById('nota-avaliacao').value;
        const comentario=document.getElementById('comentario-avaliacao').value;
        alert(`Avaliação enviada para ${empresa}!\nNota: ${nota}\nComentário: ${comentario}`);
        modalAvaliacao.classList.add('hidden'); modalAvaliacao.classList.remove('flex');
    });
}

// Atualizar alunos ativos com botão finalizar/avaliar
function atualizarAlunosAtivos(card){
    const ativosList=card.querySelectorAll('.ativos-list li');
    criarModalAvaliacao();
    ativosList.forEach(li=>{
        const btn=li.querySelector('.btn-finalizar');
        if(btn){
            btn.addEventListener('click',()=>{
                btn.remove();
                const btnAvaliar=document.createElement('button');
                btnAvaliar.textContent='Avaliar';
                btnAvaliar.className='ml-2 px-2 py-1 bg-blue-500 text-white text-xs rounded-md hover:bg-blue-600 btn-avaliar';
                li.appendChild(btnAvaliar);
                btnAvaliar.addEventListener('click',()=>{
                    document.getElementById('empresa-avaliar').textContent=card.querySelector('h3').textContent;
                    const modal=document.getElementById('modal-avaliacao');
                    modal.classList.remove('hidden'); modal.classList.add('flex');
                });
            });
        }
    });
}

// Eventos globais
document.body.addEventListener('click',function(e){
    if(e.target.closest('.ver-candidatos')){
        const card=e.target.closest('div.bg-white');
        const candidatos=JSON.parse(card.dataset.candidatos||'[]');
        listaCandidatos.innerHTML='';
        if(candidatos.length===0){
            listaCandidatos.innerHTML='<li class="text-gray-500">Nenhum candidato inscrito.</li>';
        }else{
            candidatos.forEach(c=>{
                const li=document.createElement('li');
                li.className='flex justify-between items-center bg-gray-100 p-2 rounded-md';
                li.innerHTML=`
                    <div>
                        <span class="font-medium">${c.nome}</span><br>
                        <span class="text-xs text-gray-700">${c.email}</span><br>
                        <span class="text-xs text-gray-700">${c.telefone}</span>
                    </div>
                    <div class="flex gap-2 items-center">
                        <button class="px-2 py-1 bg-blue-500 text-white text-xs rounded-md hover:bg-blue-600 btn-aceitar">Aceitar</button>
                        <button class="px-2 py-1 bg-red-500 text-white text-xs rounded-md hover:bg-red-600 btn-recusar">Recusar</button>
                        <span class="ml-2 text-sm font-medium text-gray-700 status"></span>
                    </div>
                `;
                li.querySelector('.btn-aceitar').addEventListener('click',()=>{
                    li.querySelector('.status').textContent='Aceito';
                    atualizarAceitos(card,c.nome);
                    removerRecusados(card,c.nome);
                });
                li.querySelector('.btn-recusar').addEventListener('click',()=>{
                    li.querySelector('.status').textContent='Recusado';
                    removerAceito(card,c.nome);
                    adicionarRecusado(card,c.nome);
                });
                listaCandidatos.appendChild(li);
            });
        }
        modalCandidatos.classList.remove('hidden'); modalCandidatos.classList.add('flex');
        atualizarAlunosAtivos(card);
    }
});

// Fechar modal candidatos
btnFecharCandidatos.addEventListener('click',()=>{ modalCandidatos.classList.add('hidden'); modalCandidatos.classList.remove('flex'); });

// Deletar ofertas
document.body.addEventListener('click',function(e){
    if(e.target.closest('button[data-id]')){
        const btn=e.target.closest('button[data-id]');
        if(confirm('Deseja excluir esta oferta?')){
            const card=btn.closest('div');
            card.remove();
        }
    }
});

// Tabs
const tabs=document.querySelectorAll('.tab-button');
const contents=document.querySelectorAll('.tab-content');
tabs.forEach(tab=>{tab.addEventListener('click',()=>{
    tabs.forEach(t=>t.classList.remove('bg-primary','text-white'));
    tabs.forEach(t=>t.classList.add('text-gray-600','hover:text-primary','hover:bg-blue-50'));
    tab.classList.add('bg-primary','text-white');
    tab.classList.remove('text-gray-600','hover:text-primary','hover:bg-blue-50');
    const target=tab.id.replace('tab-','content-');
    contents.forEach(c=>c.classList.add('hidden'));
    document.getElementById(target).classList.remove('hidden');
})});

// Adicionar oferta via modal
formAddOferta.addEventListener('submit',function(e){
    e.preventDefault();
    const descricao=document.getElementById('input-descricao-vaga').value;
    adicionarOferta("TechCorp Solutions",descricao,[]);
    modalAdd.classList.add('hidden'); modalAdd.classList.remove('flex'); formAddOferta.reset();
});

// Atualiza lista de aceitos e ativos
function atualizarAceitos(card,nome){
    const ulAceitos=card.querySelector('.aceitos-list');
    if(!Array.from(ulAceitos.children).some(li=>li.textContent===nome)){
        const li=document.createElement('li'); li.textContent=nome; ulAceitos.appendChild(li);
    }
}
function removerAceito(card,nome){
    const ulAceitos=card.querySelector('.aceitos-list');
    Array.from(ulAceitos.children).forEach(li=>{if(li.textContent===nome) li.remove();});
}
function adicionarRecusado(card,nome){
    const ulRec=card.querySelector('.recusados-list');
    if(!Array.from(ulRec.children).some(li=>li.textContent===nome)){
        const li=document.createElement('li'); li.textContent=nome; ulRec.appendChild(li);
    }
}
function removerRecusados(card,nome){
    const ulRec=card.querySelector('.recusados-list');
    Array.from(ulRec.children).forEach(li=>{if(li.textContent===nome) li.remove();});
}

// Ofertas de teste
adicionarOferta("TechCorp Solutions","Estágio em Desenvolvimento Web",[
    {nome:"Alice Silva", email:"alice@email.com", telefone:"(11) 91234-5678"},
    {nome:"Bruno Santos", email:"bruno@email.com", telefone:"(11) 92345-6789"}
]);
adicionarOferta("TechCorp Solutions","Estágio em Redes de Computadores",[
    {nome:"Carlos Oliveira", email:"carlos@email.com", telefone:"(11) 93456-7890"}
]);
adicionarOferta("TechCorp Solutions","Estágio em Suporte Técnico",[
    {nome:"Diana Costa", email:"diana@email.com", telefone:"(11) 94567-8901"},
    {nome:"Eduardo Lima", email:"eduardo@email.com", telefone:"(11) 95678-9012"},
    {nome:"Fernanda Alves", email:"fernanda@email.com", telefone:"(11) 96789-0123"}
]);
</script>
</div>
</body>
</html>